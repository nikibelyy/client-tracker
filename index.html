<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ó–∞–ø–∏—Å—å –Ω–∞ –æ—Å–º–æ—Ç—Ä –î–¢–ü</title>
  <style>
    :root{
      --bg:#f4f7fb;
      --card:#fff;
      --muted:#9aa0a6;
      --accent:#04c35c;
      --input-border:rgba(0,0,0,0.07);
      --shadow:0 12px 30px rgba(18,25,31,0.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial; background:linear-gradient(180deg,#f6f8fb, var(--bg)); color:#111;}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px;}
    .card{width:100%;max-width:720px;background:var(--card);border-radius:26px;box-shadow:var(--shadow);padding:28px;}
    h1{font-size:34px;margin-bottom:22px;font-weight:800;text-align:center}
    form{display:flex;flex-direction:column;gap:12px}
    .input, select {height:56px;padding:0 16px;border-radius:12px;border:1px solid var(--input-border);font-size:17px;color:#222;outline:none}
    .input::placeholder{color:var(--muted);}
    select{appearance:none;padding-right:48px;background-image:linear-gradient(45deg,transparent 50%, #888 50%),linear-gradient(135deg,#888 50%, transparent 50%);background-position:calc(100% - 18px) calc(1em + 6px), calc(100% - 13px) calc(1em + 6px);background-size:6px 6px,6px 6px;background-repeat:no-repeat}
    .btn{height:56px;border-radius:12px;border:0;font-size:18px;font-weight:800;color:#fff;background:linear-gradient(180deg,#05d26b,#00b94e);cursor:pointer}
    .btn:active{transform:translateY(1px)}
    .error{border-color:#ff6b6b !important;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>–ó–∞–ø–∏—Å—å –Ω–∞ –æ—Å–º–æ—Ç—Ä –î–¢–ü</h1>
      <form id="form" novalidate>
        <input id="fio" class="input" type="text" placeholder="–§–ò–û –∫–ª–∏–µ–Ω—Ç–∞" required />
        <input id="phone" class="input" type="tel" placeholder="+7 (___) ___-__-__" required />
        <input id="brand" class="input" type="text" placeholder="–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ" />
        <input id="plate" class="input" type="text" placeholder="–ì–æ—Å –Ω–æ–º–µ—Ä" />
        <select id="address" class="input" required>
          <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å –æ—Å–º–æ—Ç—Ä–∞</option>
          <option>–≥. –í–æ—Ä–æ–Ω–µ–∂, –ê–Ω—Ç–æ–Ω–æ–≤–∞-–û–≤—Å–∏–µ–Ω–∫–æ, 15–ê –∫–æ—Ä–ø—É—Å 1</option>
          <option>–≥. –í–æ—Ä–æ–Ω–µ–∂, –ü–ª–µ—Ö–∞–Ω–æ–≤—Å–∫–∞—è, 52</option>
        </select>
        <button id="sendBtn" class="btn" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
      </form>
    </div>
  </div>

  <script>
    // === –ù–ê–°–¢–†–û–ô–ö–ò TELEGRAM ===
    const CHAT_ID = "7523840597";
    const TOKEN = "7875147914:AAGEAZ1Bxg82z54OeSO4Q_zGaeHWeG1xJ1o";
    const URL_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;

    const form = document.getElementById('form');
    const fio = document.getElementById('fio');
    const phone = document.getElementById('phone');
    const brand = document.getElementById('brand');
    const plate = document.getElementById('plate');
    const address = document.getElementById('address');
    const sendBtn = document.getElementById('sendBtn');

    // –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    phone.addEventListener('input', function() {
      let x = phone.value.replace(/\D/g, '').substring(1);
      let formatted = "+7";
      if (x.length > 0) formatted += " (" + x.substring(0, 3);
      if (x.length >= 4) formatted += ") " + x.substring(3, 6);
      if (x.length >= 7) formatted += "-" + x.substring(6, 8);
      if (x.length >= 9) formatted += "-" + x.substring(8, 10);
      phone.value = formatted;
    });

    function validate() {
      let ok = true;
      [fio, phone, address].forEach(el => {
        if (!el.value || el.value.length < 4) { el.classList.add('error'); ok = false; }
        else el.classList.remove('error');
      });
      return ok;
    }

    function openWhatsApp(phoneNumber, message) {
      const num = phoneNumber.replace(/\D/g, ''); // —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
      const url = `https://wa.me/${num}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }

    sendBtn.addEventListener('click', () => {
      if (!validate()) return;

      const tgMessage = `
üìÑ –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –æ—Å–º–æ—Ç—Ä –î–¢–ü
üë§ –§–ò–û: ${fio.value}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone.value}
üöó –ú–∞—Ä–∫–∞ –∞–≤—Ç–æ: ${brand.value || '-'}
üî¢ –ì–æ—Å –Ω–æ–º–µ—Ä: ${plate.value || '-'}
üìç –ê–¥—Ä–µ—Å –æ—Å–º–æ—Ç—Ä–∞: ${address.value}
      `;

      const clientMessage = `
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, ${fio.value}!
–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –æ—Å–º–æ—Ç—Ä –î–¢–ü.
üìç –ê–¥—Ä–µ—Å: ${address.value}
üöó –ê–≤—Ç–æ: ${brand.value || '-'} (${plate.value || '-'})
üìû –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏: +7 (995) 719-25-23
–° –≤–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø–∏—Å–∏.
–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ!
      `;

      sendBtn.disabled = true;
      sendBtn.textContent = "–û—Ç–ø—Ä–∞–≤–∫–∞...";

      // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
      fetch(URL_API, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: tgMessage,
          parse_mode: "HTML"
        })
      })
      .then(res => res.json())
      .then(res => {
        if (res.ok) {
          // –û—Ç–∫—Ä—ã—Ç—å WhatsApp —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∫–ª–∏–µ–Ω—Ç—É
          openWhatsApp(phone.value, clientMessage);
          form.reset();
        } else {
          alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Telegram.");
        }
      })
      .catch(err => alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + err))
      .finally(() => {
        sendBtn.disabled = false;
        sendBtn.textContent = "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å";
      });
    });
  </script>
</body>
</html>
